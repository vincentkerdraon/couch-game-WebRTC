<div class="control-panel p-3 border rounded shadow">
    <h4 class="text-center mb-3">Square Control</h4>
    <!-- Joystick Control -->
    <div class="joystick-container d-flex justify-content-center align-items-center mb-3" *ngIf="visible"
        (mousedown)="startJoystick($event)" (mousemove)="moveJoystick($event)" (mouseup)="stopJoystick()"
        (mouseleave)="stopJoystick()" (touchstart)="startJoystick($event)" (touchmove)="moveJoystick($event)"
        (touchend)="stopJoystick()">
        <div class="joystick border rounded-circle d-flex justify-content-center align-items-center">
            <div class="joystick-handle bg-primary rounded-circle" [ngStyle]="joystickHandleStyle"></div>
        </div>
    </div>

    <!-- Color Input -->
    <div class="mb-3" *ngIf="visible">
        <label for="colorInput" class="form-label">Square Color</label>
        <input id="colorInput" type="color" class="form-control form-control-color" [(ngModel)]="color"
            (change)="update(0, 0)">
    </div>

    <!-- Visibility Toggle -->
    <div class="form-check form-switch mb-3">
        <input id="visibilityToggle" type="checkbox" class="form-check-input" [(ngModel)]="visible"
            (change)="update(0, 0)">
        <label for="visibilityToggle" class="form-check-label">Visible</label>
    </div>
</div>